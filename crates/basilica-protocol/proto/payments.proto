syntax = "proto3";
package basilica.payments.v1;

message CreateDepositAccountRequest { string user_id = 1; }
message CreateDepositAccountResponse {
  string user_id = 1;
  string address_ss58 = 2;
  string hotkey_public = 3;
}

message GetDepositAccountRequest { string user_id = 1; }
message GetDepositAccountResponse {
  string user_id = 1;
  string address_ss58 = 2;
  bool exists = 3;
}

message ListDepositsRequest { string user_id = 1; uint32 limit = 2; uint32 offset = 3; }
message DepositRecord {
  string tx_hash = 1;
  uint64 block_number = 2;
  uint32 event_index = 3;
  string from_address = 4;
  string to_address = 5;
  string amount_plancks = 6;
  string credited_credit_id = 7;
  string status = 8;
  string observed_at = 9;
  string finalized_at = 10;
  string credited_at = 11;
}
message ListDepositsResponse { repeated DepositRecord items = 1; }

service PaymentsService {
  rpc CreateDepositAccount(CreateDepositAccountRequest) returns (CreateDepositAccountResponse);
  rpc GetDepositAccount(GetDepositAccountRequest) returns (GetDepositAccountResponse);
  rpc ListDeposits(ListDepositsRequest) returns (ListDepositsResponse);
}